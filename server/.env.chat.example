# ===========================================
# CHAT SYSTEM ENVIRONMENT VARIABLES
# ===========================================
# Add these to your main .env file

# JWT Secret for Socket.IO Authentication
# IMPORTANT: Use a strong, unique secret in production
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# CORS Origins (comma-separated)
# Allow these origins to connect via Socket.IO and REST API
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# Redis Configuration
# Used for online presence tracking and caching
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# Database Configuration
# Prisma uses this for connecting to PostgreSQL
DATABASE_URL=postgresql://username:password@localhost:5432/escrow_db?schema=public

# Socket.IO Configuration (Optional)
# Maximum number of concurrent connections per socket
SOCKET_MAX_LISTENERS=10

# Timeout for socket connections (milliseconds)
SOCKET_CONNECTION_TIMEOUT=20000

# Rate Limiting (Optional)
# Limit requests per IP address
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100   # 100 requests per window

# File Upload (If implementing file upload)
MAX_FILE_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp

# Cloudinary (If using for image storage)
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret

# Logging
LOG_LEVEL=info  # debug, info, warn, error
LOG_FILE_PATH=./logs

# Server Configuration
PORT=4000
NODE_ENV=development  # development, production, test
API_VERSION=v1

# Session Configuration
SESSION_SECRET=your-session-secret-change-this-in-production
SESSION_TIMEOUT=3600000  # 1 hour in milliseconds

# Email Configuration (For notifications)
RESEND_API_KEY=your-resend-api-key
EMAIL_FROM=noreply@yourdomain.com

# LINE Notify (For LINE notifications)
LINE_NOTIFY_CLIENT_ID=your-line-notify-client-id
LINE_NOTIFY_CLIENT_SECRET=your-line-notify-client-secret

# ===========================================
# PRODUCTION SECURITY CHECKLIST
# ===========================================
#
# Before deploying to production:
#
# 1. [ ] Change JWT_SECRET to a strong random string
# 2. [ ] Update CORS_ORIGIN to your production domain(s)
# 3. [ ] Use secure Redis connection (TLS)
# 4. [ ] Enable SSL/TLS for database connection
# 5. [ ] Use WSS (secure WebSocket) protocol
# 6. [ ] Set NODE_ENV to 'production'
# 7. [ ] Configure proper rate limiting
# 8. [ ] Enable helmet security headers
# 9. [ ] Set up monitoring and logging
# 10. [ ] Configure backups for Redis and database
# 11. [ ] Review and update all secrets
# 12. [ ] Test failover and recovery
#
# ===========================================

# Example Production Configuration:
#
# NODE_ENV=production
# JWT_SECRET=<64-character-random-string>
# CORS_ORIGIN=https://escrow.yourdomain.com,https://api.yourdomain.com
# REDIS_URL=rediss://:<password>@redis-server.com:6380
# DATABASE_URL=postgresql://user:pass@db-server.com:5432/escrow?sslmode=require
# PORT=443
# SOCKET_CONNECTION_TIMEOUT=15000
# RATE_LIMIT_MAX_REQUESTS=50
